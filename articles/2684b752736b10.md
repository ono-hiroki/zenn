---
title: "Amazon Bedrock AgentCore Runtimeã®æœ€å°è¦ä»¶ã‚’æ¤œè¨¼ã™ã‚‹ - å›ºå®šå€¤ã‚’è¿”ã™ã ã‘ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤"
emoji: "ğŸ”¬"
type: "tech"
topics: ["aws", "bedrock", "agentcore", "python", "fastapi"]
published: false
---

## ã¯ã˜ã‚ã«

Amazon Bedrock AgentCore Runtimeã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’AWSä¸Šã§ãƒ›ã‚¹ãƒˆã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯[Strands Agents](https://strandsagents.com/)ã‚’ä½¿ã£ãŸä¾‹ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã®ã¨ã“ã‚**ã©ã“ã¾ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ã§ãã‚‹ã®ã‹**æ°—ã«ãªã‚Šã¾ã›ã‚“ã‹ï¼Ÿ

æœ¬è¨˜äº‹ã§ã¯ã€LLMã‚’ä¸€åˆ‡ä½¿ã‚ãš**å›ºå®šå€¤ã‚’è¿”ã™ã ã‘ã®FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’AgentCore Runtimeã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€æœ€å°è¦ä»¶ã‚’æ¤œè¨¼ã—ã¾ã—ãŸã€‚

## çµè«–ï¼šAgentCore Runtimeã®æœ€å°è¦ä»¶

å…ˆã«çµè«–ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

| è¦ä»¶ | å€¤ | å¿…é ˆ/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ |
|------|-----|----------------|
| ãƒãƒ¼ãƒˆ | `8080` | å¿…é ˆ |
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | `POST /invocations` | **å¿…é ˆ** |
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | `GET /ping` | ã‚ªãƒ—ã‚·ãƒ§ãƒ³ |
| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | `linux/arm64` | å¿…é ˆ |

ã¤ã¾ã‚Šã€**ãƒãƒ¼ãƒˆ8080ã§`POST /invocations`ã‚’å®Ÿè£…ã—ã¦ã„ã‚Œã°ä½•ã§ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½**ã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
agentcore-static/
â”œâ”€â”€ agent.py           # FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå›ºå®šå€¤ã‚’è¿”ã™ï¼‰
â”œâ”€â”€ deploy_agent.py    # AgentCoreã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ invoke_agent.py    # ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‘¼ã³å‡ºã—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ Dockerfile         # ARM64ã‚³ãƒ³ãƒ†ãƒŠè¨­å®š
â”œâ”€â”€ pyproject.toml     # ä¾å­˜é–¢ä¿‚ï¼ˆuvï¼‰
â””â”€â”€ uv.lock
```

## å®Ÿè£…

### agent.py - å›ºå®šå€¤ã‚’è¿”ã™FastAPIã‚¢ãƒ—ãƒª

```python
from fastapi import FastAPI
from pydantic import BaseModel
from typing import Dict, Any

app = FastAPI(title="Static Agent Server", version="1.0.0")


class InvocationRequest(BaseModel):
    input: Dict[str, Any]


class InvocationResponse(BaseModel):
    output: Dict[str, Any]


@app.post("/invocations", response_model=InvocationResponse)
async def invoke_agent(request: InvocationRequest):
    return InvocationResponse(
        output={
            "message": "ã“ã‚Œã¯å›ºå®šå€¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã™",
            "received_prompt": request.input.get("prompt", ""),
        }
    )


@app.get("/ping")
async def ping():
    return {"status": "healthy"}


if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8080)
```

ãƒã‚¤ãƒ³ãƒˆï¼š
- **LLMã¯ä¸€åˆ‡ä½¿ã£ã¦ã„ãªã„** - å˜ãªã‚‹FastAPIã‚¢ãƒ—ãƒª
- `POST /invocations` - AgentCoreã‹ã‚‰ã®å‘¼ã³å‡ºã—ã‚’å—ã‘ä»˜ã‘ã‚‹
- `GET /ping` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç”¨ï¼ˆå¾Œè¿°ã®æ¤œè¨¼ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨åˆ¤æ˜ï¼‰
- ãƒãƒ¼ãƒˆ`8080`ã§èµ·å‹•

### Dockerfile

```dockerfile
FROM --platform=linux/arm64 ghcr.io/astral-sh/uv:python3.11-bookworm-slim

WORKDIR /app

COPY pyproject.toml uv.lock ./
RUN uv sync --frozen --no-cache

COPY agent.py ./

EXPOSE 8080

CMD ["uv", "run", "uvicorn", "agent:app", "--host", "0.0.0.0", "--port", "8080"]
```

ãƒã‚¤ãƒ³ãƒˆï¼š
- **`linux/arm64`ãŒå¿…é ˆ** - AgentCore Runtimeã¯ARM64ã®ã¿ã‚µãƒãƒ¼ãƒˆ
- `uv`ã‚’ä½¿ã£ãŸä¾å­˜é–¢ä¿‚ç®¡ç†

### pyproject.toml

```toml
[project]
name = "agentcore-static"
version = "0.1.0"
requires-python = ">=3.11"
dependencies = [
    "boto3>=1.38.30",
    "fastapi>=0.115.12",
    "pydantic>=2.11.5",
    "uvicorn>=0.34.3",
]
```

æœ€å°é™ã®ä¾å­˜é–¢ä¿‚ã®ã¿ã€‚Strandsã‚‚httpxã‚‚ä¸è¦ã§ã™ã€‚

### deploy_agent.py - ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
import boto3

AWS_ACCOUNT_ID = "YOUR_ACCOUNT_ID"
AWS_REGION = "ap-northeast-1"
AGENT_NAME = "static_agent"
ECR_REPO_NAME = "agentcore-static"
ROLE_ARN = f"arn:aws:iam::{AWS_ACCOUNT_ID}:role/AgentCoreRuntimeRole"
CONTAINER_URI = f"{AWS_ACCOUNT_ID}.dkr.ecr.{AWS_REGION}.amazonaws.com/{ECR_REPO_NAME}:latest"


def deploy_agent():
    client = boto3.client("bedrock-agentcore-control", region_name=AWS_REGION)

    print(f"Creating Agent Runtime: {AGENT_NAME}")
    print(f"Container URI: {CONTAINER_URI}")

    response = client.create_agent_runtime(
        agentRuntimeName=AGENT_NAME,
        agentRuntimeArtifact={"containerConfiguration": {"containerUri": CONTAINER_URI}},
        networkConfiguration={"networkMode": "PUBLIC"},
        roleArn=ROLE_ARN,
    )

    print(f"ARN: {response['agentRuntimeArn']}")
    print(f"Status: {response['status']}")
    return response


if __name__ == "__main__":
    deploy_agent()
```

ãƒã‚¤ãƒ³ãƒˆï¼š
- `bedrock-agentcore-control` - AgentCoreã®ç®¡ç†ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `networkMode: PUBLIC` - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªå ´åˆ

### invoke_agent.py - å‘¼ã³å‡ºã—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
import boto3
import json
import uuid
import sys

AWS_REGION = "ap-northeast-1"


def invoke_agent(agent_arn: str, prompt: str):
    client = boto3.client("bedrock-agentcore", region_name=AWS_REGION)

    # Session ID must be 33+ characters
    session_id = str(uuid.uuid4()) + str(uuid.uuid4())[:1]

    payload = json.dumps({"input": {"prompt": prompt}})

    response = client.invoke_agent_runtime(
        agentRuntimeArn=agent_arn,
        runtimeSessionId=session_id,
        payload=payload,
        qualifier="DEFAULT",
    )

    response_body = response["response"].read()
    response_data = json.loads(response_body)

    print(json.dumps(response_data, indent=2, ensure_ascii=False))
    return response_data


if __name__ == "__main__":
    if len(sys.argv) < 3:
        print("Usage: python invoke_agent.py <agent_arn> <prompt>")
        sys.exit(1)

    invoke_agent(sys.argv[1], sys.argv[2])
```

ãƒã‚¤ãƒ³ãƒˆï¼š
- `bedrock-agentcore` - AgentCoreã®å‘¼ã³å‡ºã—ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆç®¡ç†ç”¨ã¨ã¯åˆ¥ï¼‰
- `runtimeSessionId` - 33æ–‡å­—ä»¥ä¸Šå¿…è¦

## ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 1. IAMãƒ­ãƒ¼ãƒ«ã®ä½œæˆ

AgentCoreç”¨ã®IAMãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
# ä¿¡é ¼ãƒãƒªã‚·ãƒ¼
cat > trust-policy.json << 'EOF'
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "bedrock-agentcore.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
EOF

# ãƒ­ãƒ¼ãƒ«ä½œæˆ
aws iam create-role \
  --role-name AgentCoreRuntimeRole \
  --assume-role-policy-document file://trust-policy.json

# ECRã‚¢ã‚¯ã‚»ã‚¹ç”¨ãƒãƒªã‚·ãƒ¼
cat > policy.json << 'EOF'
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage",
        "ecr:BatchCheckLayerAvailability"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": "ecr:GetAuthorizationToken",
      "Resource": "*"
    }
  ]
}
EOF

aws iam put-role-policy \
  --role-name AgentCoreRuntimeRole \
  --policy-name AgentCoreRuntimePolicy \
  --policy-document file://policy.json
```

### 2. ECRãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ

```bash
aws ecr create-repository \
  --repository-name agentcore-static \
  --region ap-northeast-1
```

### 3. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ï¼†ãƒ—ãƒƒã‚·ãƒ¥

```bash
# ECRãƒ­ã‚°ã‚¤ãƒ³
aws ecr get-login-password --region ap-northeast-1 | \
  docker login --username AWS --password-stdin \
  YOUR_ACCOUNT_ID.dkr.ecr.ap-northeast-1.amazonaws.com

# ãƒ“ãƒ«ãƒ‰ï¼†ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆARM64ï¼‰
docker buildx build --platform linux/arm64 \
  -t YOUR_ACCOUNT_ID.dkr.ecr.ap-northeast-1.amazonaws.com/agentcore-static:latest \
  --push .
```

### 4. AgentRuntimeã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
python deploy_agent.py
```

å‡ºåŠ›ä¾‹ï¼š
```
Creating Agent Runtime: static_agent
Container URI: YOUR_ACCOUNT_ID.dkr.ecr.ap-northeast-1.amazonaws.com/agentcore-static:latest
ARN: arn:aws:bedrock-agentcore:ap-northeast-1:YOUR_ACCOUNT_ID:runtime/static_agent-XXXXXXXX
Status: CREATING
```

### 5. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª

```bash
python -c "
import boto3
client = boto3.client('bedrock-agentcore-control', region_name='ap-northeast-1')
response = client.get_agent_runtime(agentRuntimeId='static_agent-XXXXXXXX')
print(f'Status: {response[\"status\"]}')
"
```

`READY`ã«ãªã‚‹ã¾ã§å¾…ã¡ã¾ã™ï¼ˆæ•°åˆ†ã‹ã‹ã‚Šã¾ã™ï¼‰ã€‚

## å‹•ä½œç¢ºèª

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ

```bash
# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
uv run uvicorn agent:app --host 0.0.0.0 --port 8080

# åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ†ã‚¹ãƒˆ
curl http://localhost:8080/ping
# => {"status":"healthy"}

curl -X POST http://localhost:8080/invocations \
  -H "Content-Type: application/json" \
  -d '{"input": {"prompt": "ãƒ†ã‚¹ãƒˆ"}}'
# => {"output":{"message":"ã“ã‚Œã¯å›ºå®šå€¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã™","received_prompt":"ãƒ†ã‚¹ãƒˆ"}}
```

### AgentCoreãƒ†ã‚¹ãƒˆ

```bash
python invoke_agent.py \
  "arn:aws:bedrock-agentcore:ap-northeast-1:YOUR_ACCOUNT_ID:runtime/static_agent-XXXXXXXX" \
  "Hello"
```

å‡ºåŠ›ï¼š
```json
{
  "output": {
    "message": "ã“ã‚Œã¯å›ºå®šå€¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã™",
    "received_prompt": "Hello"
  }
}
```

LLMã‚’ä½¿ã£ã¦ã„ãªã„ã®ã§ã€å½“ç„¶ãªãŒã‚‰å›ºå®šå€¤ãŒè¿”ã£ã¦ãã¾ã™ã€‚

## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ¤œè¨¼

æœ¬å½“ã«`/invocations`ã ã‘ã§è‰¯ã„ã®ã‹ï¼Ÿ`/ping`ã¯å¿…è¦ãªã®ã‹ï¼Ÿå®Ÿéš›ã«æ¤œè¨¼ã—ã¾ã—ãŸã€‚

### æ¤œè¨¼1: `/ping`ã‚’å‰Šé™¤

```python
# agent.py ã‹ã‚‰ /ping ã‚’å‰Šé™¤
@app.post("/invocations", response_model=InvocationResponse)
async def invoke_agent(request: InvocationRequest):
    return InvocationResponse(...)

# /ping ã¯å‰Šé™¤
```

**çµæœï¼šãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸã€å‘¼ã³å‡ºã—æˆåŠŸ**

`/ping`ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

### æ¤œè¨¼2: `/invocations`ã‚’`/invoke`ã«å¤‰æ›´

```python
@app.post("/invoke", response_model=InvocationResponse)  # ãƒ‘ã‚¹ã‚’å¤‰æ›´
async def invoke_agent(request: InvocationRequest):
    return InvocationResponse(...)
```

**çµæœï¼šãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸã€å‘¼ã³å‡ºã—æ™‚ã«404ã‚¨ãƒ©ãƒ¼**

```
botocore.exceptions.ClientError: An error occurred (RuntimeClientError)
when calling the InvokeAgentRuntime operation:
Received error (404) from runtime
```

`/invocations`ã®ãƒ‘ã‚¹ã¯å›ºå®šã§å¤‰æ›´ä¸å¯ã§ã‚ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

### æ¤œè¨¼çµæœã¾ã¨ã‚

| ãƒ†ã‚¹ãƒˆå†…å®¹ | ãƒ‡ãƒ—ãƒ­ã‚¤ | å‘¼ã³å‡ºã— | çµè«– |
|-----------|---------|---------|------|
| æ­£å¸¸ï¼ˆä¸¡æ–¹ã‚ã‚Šï¼‰ | âœ… æˆåŠŸ | âœ… æˆåŠŸ | - |
| `/ping`ã‚’å‰Šé™¤ | âœ… æˆåŠŸ | âœ… æˆåŠŸ | **ã‚ªãƒ—ã‚·ãƒ§ãƒ³** |
| `/invocations`ã‚’å¤‰æ›´ | âœ… æˆåŠŸ | âŒ 404 | **å¿…é ˆï¼ˆãƒ‘ã‚¹å›ºå®šï¼‰** |

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ                                                    â”‚
â”‚  boto3.client('bedrock-agentcore').invoke_agent_runtime()       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS AgentCore Runtime                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Dockerã‚³ãƒ³ãƒ†ãƒŠ (agentcore-static:latest)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  FastAPI (agent.py)                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  POST /invocations â†’ å›ºå®šå€¤ã‚’è¿”ã™                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  GET  /ping        â†’ {"status": "healthy"}          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

AgentCore Runtimeã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ›ã‚¹ãƒˆã—ã€`POST /invocations`ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ ã§ã™ã€‚

## ã‚³ãƒ¼ãƒ‰æ›´æ–°æ™‚ã®å†ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ï¼†ãƒ—ãƒƒã‚·ãƒ¥
docker buildx build --platform linux/arm64 \
  -t YOUR_ACCOUNT_ID.dkr.ecr.ap-northeast-1.amazonaws.com/agentcore-static:latest \
  --push .

# 2. AgentRuntimeã‚’æ›´æ–°
python -c "
import boto3
client = boto3.client('bedrock-agentcore-control', region_name='ap-northeast-1')
client.update_agent_runtime(
    agentRuntimeId='static_agent-XXXXXXXX',
    agentRuntimeArtifact={'containerConfiguration': {'containerUri': 'YOUR_ACCOUNT_ID.dkr.ecr.ap-northeast-1.amazonaws.com/agentcore-static:latest'}},
    networkConfiguration={'networkMode': 'PUBLIC'},
    roleArn='arn:aws:iam::YOUR_ACCOUNT_ID:role/AgentCoreRuntimeRole'
)
"

# 3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªï¼ˆREADYã«ãªã‚‹ã¾ã§å¾…ã¤ï¼‰
```

## ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# 1. AgentRuntimeå‰Šé™¤
python -c "
import boto3
client = boto3.client('bedrock-agentcore-control', region_name='ap-northeast-1')
client.delete_agent_runtime(agentRuntimeId='static_agent-XXXXXXXX')
"

# 2. ECRãƒªãƒã‚¸ãƒˆãƒªå‰Šé™¤
aws ecr delete-repository \
  --repository-name agentcore-static \
  --force \
  --region ap-northeast-1

# 3. IAMãƒ­ãƒ¼ãƒ«å‰Šé™¤ï¼ˆä»–ã§ä½¿ç”¨ã—ã¦ã„ãªã„å ´åˆï¼‰
aws iam delete-role-policy \
  --role-name AgentCoreRuntimeRole \
  --policy-name AgentCoreRuntimePolicy
aws iam delete-role --role-name AgentCoreRuntimeRole
```

## ã¾ã¨ã‚

Amazon Bedrock AgentCore Runtimeã¯ã€æ€ã£ãŸä»¥ä¸Šã«ã‚·ãƒ³ãƒ—ãƒ«ã§ã—ãŸã€‚

**æœ€å°è¦ä»¶ï¼š**
- `POST /invocations`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆãƒ‘ã‚¹å›ºå®šï¼‰
- ãƒãƒ¼ãƒˆ8080
- linux/arm64ã‚³ãƒ³ãƒ†ãƒŠ

LLMã‚’ä½¿ã‚ãªã„å›ºå®šå€¤ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚‚å•é¡Œãªããƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã¤ã¾ã‚Šï¼š

- **ä»»æ„ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ã‚’ä½¿ãˆã‚‹ï¼ˆFastAPI, Flask, Express, Go, Rust...ï¼‰
- **ä»»æ„ã®ãƒ­ã‚¸ãƒƒã‚¯**ã‚’å®Ÿè£…ã§ãã‚‹ï¼ˆLLMå‘¼ã³å‡ºã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã€å¤–éƒ¨APIé€£æº...ï¼‰
- AgentCore Runtimeã¯**ã‚³ãƒ³ãƒ†ãƒŠãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**ã«å¾¹ã—ã¦ã„ã‚‹

AgentCore Runtimeã¯ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå°‚ç”¨ã€ã¨ã„ã†ã‚ˆã‚Šã‚‚ã€**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘ã‘ã«æœ€é©åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹**ã¨ã„ã†ç†è§£ãŒæ­£ç¢ºã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## å‚è€ƒ

- [Strands Agents - Deploy to Bedrock AgentCore](https://strandsagents.com/latest/documentation/docs/user-guide/deploy/deploy_to_bedrock_agentcore/python/)
- [Amazon Bedrock AgentCore Documentation](https://docs.aws.amazon.com/bedrock/latest/userguide/agentcore.html)
